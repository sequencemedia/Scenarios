'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _regenerator=require('babel-runtime/regenerator');var _regenerator2=_interopRequireDefault(_regenerator);var _objectWithoutProperties2=require('babel-runtime/helpers/objectWithoutProperties');var _objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2);var _asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator');var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _fsExtra=require('fs-extra');var _logger=require('../../../logger');var _logger2=_interopRequireDefault(_logger);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=function(){var _ref=(0,_asyncToGenerator3.default)(/*#__PURE__*/_regenerator2.default.mark(function _callee2(_ref2,_ref3){var _ref3$countryName=_ref3.countryName,countryName=_ref3$countryName===undefined?'United Kingdom':_ref3$countryName;var page=_ref2.page,config=(0,_objectWithoutProperties3.default)(_ref2,['page']);var countries,_ref5$message,message,dir;return _regenerator2.default.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return page.waitForSelector('.quote-input-country-container input.quote-input-country');case 3:_context2.next=5;return page.$$('.quote-input-country-container input.quote-input-country');case 5:countries=_context2.sent;countries.forEach(function(){var _ref4=(0,_asyncToGenerator3.default)(/*#__PURE__*/_regenerator2.default.mark(function _callee(country){return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return country.focus();case 2:_context.next=4;return country.click();case 4:_context.next=6;return country.type(countryName);case 6:case'end':return _context.stop();}}},_callee,undefined);}));return function(_x3){return _ref4.apply(this,arguments);};}());_context2.next=19;break;case 9:_context2.prev=9;_context2.t0=_context2['catch'](0);_ref5$message=_context2.t0.message;message=_ref5$message===undefined?'No error message is defined':_ref5$message;_logger2.default.error('Error in Step 1 - Enter Single Dates. '+message.trim());dir=config.dir;_context2.next=17;return(0,_fsExtra.ensureDir)(dir);case 17:_context2.next=19;return page.screenshot({path:dir+'/step-1-enter-country.png',fullPage:true});case 19:case'end':return _context2.stop();}}},_callee2,undefined,[[0,9]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();