'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _regenerator=require('babel-runtime/regenerator');var _regenerator2=_interopRequireDefault(_regenerator);var _extends2=require('babel-runtime/helpers/extends');var _extends3=_interopRequireDefault(_extends2);var _objectWithoutProperties2=require('babel-runtime/helpers/objectWithoutProperties');var _objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2);var _asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator');var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _fsExtra=require('fs-extra');var _toBool=require('../../../to-bool');var _toBool2=_interopRequireDefault(_toBool);var _logger=require('../../../logger');var _logger2=_interopRequireDefault(_logger);var _step2SelectBasic=require('./step2-select-basic');var _step2SelectBasic2=_interopRequireDefault(_step2SelectBasic);var _step2SelectBasicNonMedical=require('./step2-select-basic-non-medical');var _step2SelectBasicNonMedical2=_interopRequireDefault(_step2SelectBasicNonMedical);var _step2SelectBasicNonMedicalTripCancellation=require('./step2-select-basic-non-medical-trip-cancellation');var _step2SelectBasicNonMedicalTripCancellation2=_interopRequireDefault(_step2SelectBasicNonMedicalTripCancellation);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}/* eslint no-nested-ternary: "off" */exports.default=function(){var _ref=(0,_asyncToGenerator3.default)(/*#__PURE__*/_regenerator2.default.mark(function _callee(_ref2,_ref3){var _ref3$selectBasic=_ref3.selectBasic,basic=_ref3$selectBasic===undefined?false:_ref3$selectBasic,_ref3$selectBasicNonM=_ref3.selectBasicNonMedical,basicNonMedical=_ref3$selectBasicNonM===undefined?false:_ref3$selectBasicNonM,_ref3$selectBasicNonM2=_ref3.selectBasicNonMedicalTripCancellation,basicNonMedicalTripCancellation=_ref3$selectBasicNonM2===undefined?false:_ref3$selectBasicNonM2;var page=_ref2.page,config=(0,_objectWithoutProperties3.default)(_ref2,['page']);var _ref4$message,message,dir,width,height;return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(0,_toBool2.default)(basic)){_context.next=5;break;}_context.next=3;return(0,_step2SelectBasic2.default)((0,_extends3.default)({},config,{page:page}));case 3:_context.next=36;break;case 5:if(!(0,_toBool2.default)(basicNonMedical)){_context.next=10;break;}_context.next=8;return(0,_step2SelectBasicNonMedical2.default)((0,_extends3.default)({},config,{page:page}));case 8:_context.next=36;break;case 10:if(!(0,_toBool2.default)(basicNonMedicalTripCancellation)){_context.next=15;break;}_context.next=13;return(0,_step2SelectBasicNonMedicalTripCancellation2.default)((0,_extends3.default)({},config,{page:page}));case 13:_context.next=36;break;case 15:_context.prev=15;_context.next=18;return page.waitForSelector('[data-step-index="2"]',{visible:true});case 18:_context.next=20;return page.click('[data-step-index="2"]');case 20:_context.next=22;return page.evaluate(function(){document.querySelector('[data-step-index="2"] .your-quote-wrapper').scrollIntoView({behaviour:'instant'});});case 22:_context.next=24;return page.click('[data-step-index="2"] button.buy-cta');case 24:_context.next=36;break;case 26:_context.prev=26;_context.t0=_context['catch'](15);_ref4$message=_context.t0.message;message=_ref4$message===undefined?'No error message is defined':_ref4$message;_logger2.default.error('Error in Step 2. '+message.trim());dir=config.dir,width=config.w,height=config.h;_context.next=34;return(0,_fsExtra.ensureDir)(dir);case 34:_context.next=36;return page.screenshot({path:dir+'/step-2.png',fullPage:true,clip:{x:0,y:0,width:width,height:height}});case 36:case'end':return _context.stop();}}},_callee,undefined,[[15,26]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();