'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _regenerator=require('babel-runtime/regenerator');var _regenerator2=_interopRequireDefault(_regenerator);var _extends2=require('babel-runtime/helpers/extends');var _extends3=_interopRequireDefault(_extends2);var _objectWithoutProperties2=require('babel-runtime/helpers/objectWithoutProperties');var _objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2);var _asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator');var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _captureScreenshot=require('../../capture-screenshot');var _captureScreenshot2=_interopRequireDefault(_captureScreenshot);var _logger=require('../../logger');var _logger2=_interopRequireDefault(_logger);var _selectSingle=require('./select-single');var _selectSingle2=_interopRequireDefault(_selectSingle);var _enterCountry=require('./enter-country');var _enterCountry2=_interopRequireDefault(_enterCountry);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=function(){var _ref=(0,_asyncToGenerator3.default)(/*#__PURE__*/_regenerator2.default.mark(function _callee(_ref2){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var page=_ref2.page,config=(0,_objectWithoutProperties3.default)(_ref2,['page']);var navigation,_navigation,_ref3$message,message;return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return page.focus('button[data-cover-type="travel"]');case 3:_context.next=5;return page.click('button[data-cover-type="travel"]');case 5:_context.next=7;return(0,_selectSingle2.default)((0,_extends3.default)({},config,{page:page}),params);case 7:_context.next=9;return(0,_enterCountry2.default)((0,_extends3.default)({},config,{page:page}),params);case 9:_context.next=11;return page.waitForSelector('.quote-continue');case 11:navigation=page.waitForSelector('.quote-continue',{visible:true});_context.next=14;return page.evaluate(function(){document.querySelector('.quote-continue').scrollIntoView({behaviour:'instant'});});case 14:_context.next=16;return navigation;case 16:_navigation=page.waitForNavigation({waitUntil:['networkidle0','networkidle2','load']});_context.next=19;return page.focus('button[data-tracking="click:quote:step-0:cta:continue"]');case 19:_context.next=21;return page.click('button[data-tracking="click:quote:step-0:cta:continue"]');case 21:_context.next=23;return _navigation;case 23:_context.next=32;break;case 25:_context.prev=25;_context.t0=_context['catch'](0);_ref3$message=_context.t0.message;message=_ref3$message===undefined?'No error message is defined':_ref3$message;_logger2.default.error('Error in Single. '+message.trim());_context.next=32;return(0,_captureScreenshot2.default)((0,_extends3.default)({},config,{page:page}),'single');case 32:case'end':return _context.stop();}}},_callee,undefined,[[0,25]]);}));return function(_x){return _ref.apply(this,arguments);};}();