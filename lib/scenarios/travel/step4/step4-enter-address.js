'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _regenerator=require('babel-runtime/regenerator');var _regenerator2=_interopRequireDefault(_regenerator);var _objectWithoutProperties2=require('babel-runtime/helpers/objectWithoutProperties');var _objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2);var _asyncToGenerator2=require('babel-runtime/helpers/asyncToGenerator');var _asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2);var _fsExtra=require('fs-extra');var _logger=require('../../../logger');var _logger2=_interopRequireDefault(_logger);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}exports.default=function(){var _ref=(0,_asyncToGenerator3.default)(/*#__PURE__*/_regenerator2.default.mark(function _callee(_ref2){var _ref3=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref3$address=_ref3.address;_ref3$address=_ref3$address===undefined?{}:_ref3$address;var _ref3$address$address=_ref3$address.address1,address1=_ref3$address$address===undefined?'4 Callisons Place':_ref3$address$address,_ref3$address$address2=_ref3$address.address2,address2=_ref3$address$address2===undefined?'Bellot Street':_ref3$address$address2,_ref3$address$city=_ref3$address.city,city=_ref3$address$city===undefined?'Greenwich':_ref3$address$city,_ref3$address$zip=_ref3$address.zip,zip=_ref3$address$zip===undefined?'SE10 0AJ':_ref3$address$zip;var page=_ref2.page,config=(0,_objectWithoutProperties3.default)(_ref2,['page']);var _ref4$message,message,dir,width,height;return _regenerator2.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return page.waitForSelector('[data-step-index="4"]',{visible:true});case 3:_context.next=5;return page.click('[data-step-index="4"]');case 5:_context.next=7;return page.evaluate(function(){document.querySelector('[data-step-index="4"] .address-details .row').scrollIntoView({behaviour:'instant'});});case 7:_context.next=9;return page.type('[data-step-index="4"] input#address_1',address1);case 9:_context.next=11;return page.type('[data-step-index="4"] input#address_2',address2);case 11:_context.next=13;return page.type('[data-step-index="4"] input#address_city',city);case 13:_context.next=15;return page.type('[data-step-index="4"] input#address_zip',zip);case 15:_context.next=27;break;case 17:_context.prev=17;_context.t0=_context['catch'](0);_ref4$message=_context.t0.message;message=_ref4$message===undefined?'No error message is defined':_ref4$message;_logger2.default.error('Error in Step 4 - Enter Address. '+message.trim());dir=config.dir,width=config.w,height=config.h;_context.next=25;return(0,_fsExtra.ensureDir)(dir);case 25:_context.next=27;return page.screenshot({path:dir+'/step-4-enter-address.png',fullPage:true,clip:{x:0,y:0,width:width,height:height}});case 27:case'end':return _context.stop();}}},_callee,undefined,[[0,17]]);}));return function(_x){return _ref.apply(this,arguments);};}();