'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.executeMinimum=exports.executeNonStop=exports.executeMaximum=undefined;var _extends2=require('babel-runtime/helpers/extends');var _extends3=_interopRequireDefault(_extends2);var _objectWithoutProperties2=require('babel-runtime/helpers/objectWithoutProperties');var _objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2);var _promise=require('babel-runtime/core-js/promise');var _promise2=_interopRequireDefault(_promise);var _chalk=require('chalk');var _chalk2=_interopRequireDefault(_chalk);var _scenarios=require('./scenarios');var _scenarios2=_interopRequireDefault(_scenarios);var _format=require('./format');var _format2=_interopRequireDefault(_format);var _logger=require('./logger');var _logger2=_interopRequireDefault(_logger);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}/*
const {
  [scenario]: execute = () => Promise.resolve()
} = scenarios;
*/var get=function get(scenario){return _scenarios2.default[scenario]||function(){return _promise2.default.resolve();};};var executeMaximum=function executeMaximum(_ref,p){var scenario=_ref.scenario,_ref$iteration=_ref.iteration,iteration=_ref$iteration===undefined?1:_ref$iteration,_ref$maximum=_ref.maximum,maximum=_ref$maximum===undefined?1:_ref$maximum,c=(0,_objectWithoutProperties3.default)(_ref,['scenario','iteration','maximum']);return get(scenario)((0,_extends3.default)({},c,{scenario:scenario,iteration:iteration,maximum:maximum}),p).then(function(){_logger2.default.info('\t',_chalk2.default.yellow((0,_format2.default)(iteration)),iteration<maximum?'Scenario \''+scenario+'\' has executed successfully - executing again ...':'Scenario \''+scenario+'\' has executed successfully.');}).catch(function(_ref2){var _ref2$message=_ref2.message,message=_ref2$message===undefined?'No error message is defined':_ref2$message;_logger2.default.error('\t',_chalk2.default.yellow((0,_format2.default)(iteration)),'Scenario \''+scenario+'\' has not executed successfully. '+message.trim()+' - executing again ...');}).then(function(){return iteration<maximum?executeMaximum((0,_extends3.default)({},c,{iteration:iteration+1,scenario:scenario,maximum:maximum}),p):process.exit();});};exports.executeMaximum=executeMaximum;var executeNonStop=function executeNonStop(_ref3,p){var scenario=_ref3.scenario,_ref3$iteration=_ref3.iteration,iteration=_ref3$iteration===undefined?1:_ref3$iteration,c=(0,_objectWithoutProperties3.default)(_ref3,['scenario','iteration']);return get(scenario)((0,_extends3.default)({},c,{scenario:scenario,iteration:iteration}),p).then(function(){_logger2.default.info('\t',_chalk2.default.yellow((0,_format2.default)(iteration)),'Scenario \''+scenario+'\' has executed successfully - executing again ...');}).catch(function(_ref4){var _ref4$message=_ref4.message,message=_ref4$message===undefined?'No error message is defined':_ref4$message;_logger2.default.error('\t',_chalk2.default.yellow((0,_format2.default)(iteration)),'Scenario \''+scenario+'\' has not executed successfully. '+message.trim()+' - executing again ...');}).then(function(){return executeNonStop((0,_extends3.default)({},c,{iteration:iteration+1,scenario:scenario}),p);});};exports.executeNonStop=executeNonStop;var executeMinimum=function executeMinimum(_ref5,p){var scenario=_ref5.scenario,c=(0,_objectWithoutProperties3.default)(_ref5,['scenario']);return get(scenario)((0,_extends3.default)({},c,{scenario:scenario}),p).then(function(){_logger2.default.info('Scenario \''+scenario+'\' has executed successfully.');}).catch(function(_ref6){var _ref6$message=_ref6.message,message=_ref6$message===undefined?'No error message is defined':_ref6$message;_logger2.default.error('Scenario \''+scenario+'\' has not executed successfully. '+message.trim());}).then(function(){return process.exit();});};exports.executeMinimum=executeMinimum;